name: CI
on: pull_request
jobs:
  mustpass:
    name: this must pass
    runs-on: ubuntu-latest
    steps:
      - name: this will pass
        run: |
          echo "this will pass"
          true
  mayfail:
    name: this may fail
    runs-on: ubuntu-latest
    outputs:
      completion: OMGLOL
      extra: ${{steps.dothenotification.outputs.mayfail}}
    steps:
      - id: dothetest
        name: this may fail
        continue-on-error: true
        run: |
          echo "this may fail"
          false
      - name: notify
        id: dothenotification
        run: |
          echo "::set-output name=mayfail::completion"
  evaluate:
    name: evaluate the previous step
    runs-on: ubuntu-latest
    needs: mayfail
    steps:
      - run: |
          echo Starting
          echo ${{needs.mayfail.outputs.completion}}
          echo ${{needs.mayfail.outputs.extra}}
          echo Done
